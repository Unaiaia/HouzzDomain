"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var GeoSites={com:{ccTLD:"us",domain:"com",locale:"en-US",countryCode:"US",countryNativeName:"United States",timeZone:"America/Los_Angeles",siteId:"101",localeId:"1001",seoLang:"en"},"co.uk":{ccTLD:"uk",domain:"co.uk",locale:"en-GB",countryCode:"GB",countryNativeName:"United Kingdom",timeZone:"Europe/London",siteId:"102",localeId:"1002",seoLang:"en-gb"},"com.au":{ccTLD:"au",domain:"com.au",locale:"en-AU",countryCode:"AU",countryNativeName:"Australia",timeZone:"Australia/ACT",siteId:"103",localeId:"1003",seoLang:"en-au"},de:{ccTLD:"de",domain:"de",locale:"de-DE",countryCode:"DE",countryNativeName:"Deutschland",timeZone:"Europe/Berlin",siteId:"104",localeId:"1004",seoLang:"de"},fr:{ccTLD:"fr",domain:"fr",locale:"fr-FR",countryCode:"FR",countryNativeName:"France",timeZone:"Europe/Paris",siteId:"105",localeId:"1005",seoLang:"fr"},ru:{ccTLD:"ru",domain:"ru",locale:"ru-RU",countryCode:"RU",countryNativeName:"Россия",timeZone:"Europe/Moscow",siteId:"106",localeId:"1006",seoLang:"ru"},jp:{ccTLD:"jp",domain:"jp",locale:"ja-JP",countryCode:"JP",countryNativeName:"日本",timeZone:"Asia/Tokyo",siteId:"107",localeId:"1007",seoLang:"ja"},it:{ccTLD:"it",domain:"it",locale:"it-IT",countryCode:"IT",countryNativeName:"Italia",timeZone:"Europe/Rome",siteId:"108",localeId:"1008",seoLang:"it"},es:{ccTLD:"es",domain:"es",locale:"es-ES",countryCode:"ES",countryNativeName:"España",timeZone:"Europe/Madrid",siteId:"109",localeId:"1009",seoLang:"es"},dk:{ccTLD:"dk",domain:"dk",locale:"da-DK",countryCode:"DK",countryNativeName:"Danmark",timeZone:"Europe/Copenhagen",siteId:"110",localeId:"1010",seoLang:"da"},no:{ccTLD:"no",domain:"no",locale:"nb-NO",countryCode:"NO",countryNativeName:"Norway",timeZone:"Europe/Oslo",siteId:"111",localeId:"1011",seoLang:"nb"},fi:{ccTLD:"fi",domain:"fi",locale:"fi-FI",countryCode:"FI",countryNativeName:"Suomi",timeZone:"Europe/Helsinki",siteId:"112",localeId:"1012",seoLang:"fi"},se:{ccTLD:"se",domain:"se",locale:"sv-SE",countryCode:"SE",countryNativeName:"Sverige",timeZone:"Europe/Stockholm",siteId:"113",localeId:"1013",seoLang:"sv"},ie:{ccTLD:"ie",domain:"ie",locale:"en-IE",countryCode:"IE",countryNativeName:"Ireland",timeZone:"Europe/Dublin",siteId:"114",localeId:"1014",seoLang:"en-ie"},nz:{ccTLD:"nz",domain:"co.nz",locale:"en-NZ",countryCode:"NZ",countryNativeName:"New Zealand",timeZone:"Pacific/Auckland",siteId:"115",localeId:"1015",seoLang:"en-nz"},"com.sg":{ccTLD:"sg",domain:"com.sg",locale:"en-SG",countryCode:"SG",countryNativeName:"Singapore",timeZone:"Asia/Singapore",siteId:"116",localeId:"1016",seoLang:"en-sg"},in:{ccTLD:"in",domain:"in",locale:"en-IN",countryCode:"IN",countryNativeName:"India",timeZone:"Asia/Calcutta",siteId:"117",localeId:"1017",seoLang:"en-in"},nl:{ccTLD:"nl",domain:"nl",locale:"nl-NL",countryCode:"NL",countryNativeName:"Netherlands",timeZone:"Europe/Amsterdam",siteId:"118",localeId:"1018",seoLang:"nl"},at:{ccTLD:"at",domain:"at",locale:"de-AT",countryCode:"AT",countryNativeName:"Austria",timeZone:"Europe/Vienna",siteId:"119",localeId:"1019",seoLang:"de-at"}},OPTIONS={ENABLE_HOVER:"enableHover",HOVER_POSITION:"hoverPosition",ENABLE_HOUZZ_BG:"enableHouzzBg"};function isSafari(){return!!window.safari}function isChrome(){return!!window.chrome}function isFirefox(){if("undefined"!=typeof navigator)return navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function isEdge(){if("undefined"!=typeof navigator)return navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("edge")>-1}function getInternationalizedUrls(e,o){storageGet({env:"prod",preferredLocale:getBrowserLocale()},function(t){if(t){var n=getBrowserLocale();getBrowserLocale().startsWith("en")&&(n=t.preferredLocale);var a,r=convertLocaleToDomain(n),i="houzz";switch(t.env){case"prod":i="houzz";break;case"stg":i="stghouzz";break;case"houzz2":i="houzz2";break;case"dev":i="stghouzz"}a=e.map(function(e){return"https://www."+i+"."+r+e}),o&&"function"==typeof o&&o(a)}})}function getBrowserLocale(){return convertSeolangToLocale(navigator?navigator.language:"en-US")}function isOnBlacklistSite(e){for(var o=[/houzz/,/youtube/],t=0;t<o.length;t++){if(o[t].test(e))return!0}return!1}function constructLocaleArray(e){var o=[];return Object.keys(e).forEach(function(t){o.push(e[t].locale)}),o}function constructLocaleToDomainMap(e){var o={};return Object.keys(e).forEach(function(t){o[e[t].locale]=t}),o}function convertSeolangToLocale(e){if("en"===e||"en-US"===e)return"en-US";if(!GeoSites)return console.error("ERROR: GeoSites not exist"),"en-US";for(var o=constructLocaleArray(GeoSites),t=o.length,n=0;n<t;n++)if(-1!==o[n].indexOf(e))return o[n];return"en-US"}function convertLocaleToSeolang(e){var o="en";return"en"===e||"en-US"===e?"en":GeoSites?(Object.keys(GeoSites).forEach(function(t){var n=GeoSites[t];n.locale!==e&&n.seoLang!==e||(o=n.seoLang.split("-")[0].toLowerCase())}),o):(console.error("ERROR: GeoSites not exist"),"en")}function convertLocaleToDomain(e){if(!GeoSites)return console.error("ERROR: GeoSites not exist"),"com";var o=constructLocaleToDomainMap(GeoSites)[e];return o||"com"}window.onload=function(){var e=document.getElementsByClassName("hzPlaceholder__close")[0];function o(e){storageGet(_defineProperty({},OPTIONS.ENABLE_HOUZZ_BG,!0),function(o){o&&!o[OPTIONS.ENABLE_HOUZZ_BG]?sendMessage({action:"updateTabUrl",data:e}):(sendMessage({action:"logEvent",data:{key:"open_houzz_bg",payload:null}}),loadModule(function(e){e.openHouzzBg()}))})}e&&e.addEventListener("click",function(){window.parent.postMessage({action:"closeGrid"},"*")}),window.addEventListener("message",function(e){try{var o=JSON.parse(e.data),t=o.action,n=o.data;if(t&&t.startsWith("loadModule")){var a=actionCallbackMap[t];a&&a(o)}else if(t&&(t.startsWith("storageGet")||t.startsWith("storageSet"))){var r=actionCallbackMap[t];r&&r(n)}else if(t&&n&&t.startsWith("openGrid"))loadModule(function(e){var o=n;e.showGrid(o),$("#placeholder").css("display","none")});else if(t&&n&&t.startsWith("openSave"))loadModule(function(e){var o=n;e.openSaveModal(o),$("#placeholder").css("display","none")});else{var i=actionCallbackMap[t];i&&i(o)}}catch(e){return}}),isRemoteIframe()||fetch("../settings.json").then(function(e){return e.json()}).then(function(e){var t,n=e.hasHouzzBg,a=e.browserNewTabUrl;(n=JSON.parse(n))&&(t=document.location.href,/houzz\.html$/.test(t))&&(isSafari()?(createStaticIframe(),onMessage(function(e){var o=e.action,t=e.data;if(o&&(o.startsWith("storageGet")||o.startsWith("storageSet"))){var n=actionCallbackMap[o];n&&n(t)}else if(o&&o.startsWith("loadModule")){var a=actionCallbackMap[o];a&&a(e)}else o.startsWith("getCookie")&&sendGetCookieReqToStaticIframe(o,t)}),window.addEventListener("message",function(e){if(-1!==e.origin.indexOf("localhost")||-1!==e.origin.indexOf("houzz.com")){var t=e.data;if(t){var n=t.action,a=t.data;n&&n.startsWith("staticIframeLoaded")?o():n&&n.startsWith("getCookie")&&sendMessage({action:n,data:a})}}})):o(a))})},window.browser=window.browser||window.chrome;var BASE_URL,CONTAINER=document.getElementById("root"),loadedScripts=[];window.browser=window.browser||window.chrome||window.safari;var HOST="";function loadStylesheet(e){$("head").append("<link>"),$("head").children(":last").attr({rel:"stylesheet",type:"text/css",href:e})}function loadScripts(e,o){if(e&&0!==e.length){var t=new $.Deferred,n=t;setBaseURLHost(function(a){var r=a.BASE_URL,i=a.HOST;$.each(e,function(e,o){n=n.pipe(function(){var e=r+o;return o&&"string"==typeof o&&"//"!==o.substring(0,2)&&(e=r+i+o),$.cachedScript(e).done(function(){loadedScripts.push(e)}).fail(function(e){console.error(e)})})}),n.pipe(function(e){"function"==typeof o&&o()},function(e){console.error(e)}),t.resolve()})}}function loadModule(e){window.HZ={},sendMessage({action:"loadModule"},function(o){if(o){var t=o.data;if(t.error)return console.error("Internal Error: "+t.error+". Please try again later"),void window.parent.postMessage({action:"closeGrid"},"*");var n=t.css,a=t.js,r=t.ctx;window.HZ.ctx=r,setBaseURLHost(function(o){for(var t=o.BASE_URL,r=o.HOST,i=0;i<n.length;i++){var c=n[i],s=t+c;c&&"string"==typeof c&&"//"!==c.substring(0,2)&&(s=t+r+n[i]),loadStylesheet(s)}loadScripts(a,function(){var o=HZ.WebModule.render("browserPlugin",CONTAINER);HZ.WebModule.getModule("browserPlugin");e.call(null,o)})})}})}setBaseURLHost(),jQuery.cachedScript=function(e,o){return o=$.extend(o||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(o)};var STATIC_HOUZZ_IFRAME_URL="/j/browser-plugin/iframe/staticIframe.html?v="+Date.now();function setBaseURLHost(e){storageGet({env:"prod"},function(o){if(o){switch(o.env){case"dev":BASE_URL="https://localhost:4000";break;case"stg":BASE_URL="https://",HOST="www.stghouzz.com";break;case"houzz2":BASE_URL="https://",HOST="www.houzz2.com";break;case"prod":default:BASE_URL="https://",HOST="www.houzz.com"}e&&"function"==typeof e&&e({BASE_URL:BASE_URL,HOST:HOST})}})}function sendGetCookieReqToStaticIframe(e,o){var t=document.getElementsByClassName("hzFrameStatic")[0];t&&storageGet({env:"prod"},function(n){"object"===(void 0===o?"undefined":_typeof(o))&&(o.env=n.env);var a=JSON.stringify({action:e,data:o});t.contentWindow.postMessage(a,"*")})}function createStaticIframe(){document.getElementsByClassName("hzFrameStatic")[0]||setBaseURLHost(function(e){var o=e.BASE_URL,t=e.HOST,n=dom("iframe","hzFrameStatic"),a=o+t+STATIC_HOUZZ_IFRAME_URL;n.setAttribute("allowtransparency","true"),n.setAttribute("style","display: none"),n.src=a,document.body.appendChild(n)})}function dom(e,o,t){var n=document.createElement(e);return t&&(n.id=t),o&&(n.className=o),n}